---
const links = [
    { label: "Docs", href: "/docs/introduction" },
    { label: "Ecosystem", href: "/#ecosystem" },
    { label: "Blog", href: "/blog" },
    { label: "Back Project", href: "/back" },
    {
        label: "GitHub",
        href: "https://github.com/kodajs/kodajs",
        external: true,
    },
];
---

<div
    id="mobile-menu"
    class="fixed inset-0 z-[100] bg-slate-950/90 backdrop-blur-2xl transform translate-x-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] md:hidden"
    aria-hidden="true"
>
    <!-- Background decorations -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div
            class="absolute top-[-10%] right-[-10%] w-96 h-96 bg-purple-500/20 rounded-full blur-3xl opacity-50"
        >
        </div>
        <div
            class="absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-sky-500/20 rounded-full blur-3xl opacity-50"
        >
        </div>
    </div>

    <div class="flex flex-col h-full p-6 relative z-10">
        <div class="flex justify-between items-center mb-12">
            <a href="/" class="flex items-center gap-3">
                <img src="/logo.svg" alt="KodaJS" class="w-8 h-8" />
                <span class="font-bold text-lg tracking-tight"
                    >Koda<span class="text-sky-400">Zenith</span></span
                >
            </a>
            <button
                id="close-mobile-menu"
                class="p-2 rounded-full border border-white/10 bg-white/5 text-slate-400 hover:text-white transition-colors"
                aria-label="Close Menu"
            >
                <svg
                    class="w-6 h-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <!-- Mobile Search Trigger -->
        <button
            id="mobile-search-trigger"
            class="w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-slate-400 mb-8 hover:bg-white/10 hover:text-white transition-colors"
        >
            <svg
                class="w-5 h-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <span class="text-sm font-medium">Search documentation...</span>
            <kbd class="ml-auto px-2 py-1 rounded bg-black/20 text-xs font-sans"
                >⌘K</kbd
            >
        </button>

        <nav class="flex flex-col gap-6">
            {
                links.map((link) => (
                    <a
                        href={link.href}
                        target={link.external ? "_blank" : "_self"}
                        class="text-3xl font-black tracking-tight text-transparent bg-clip-text bg-gradient-to-br from-white to-slate-400 hover:to-sky-400 transition-all block py-2 border-b border-white/5"
                    >
                        {link.label}
                    </a>
                ))
            }
        </nav>

        <div class="mt-auto pb-8">
            <div
                class="p-4 rounded-xl bg-gradient-to-br from-slate-900 to-slate-950 border border-white/10"
            >
                <div class="text-xs font-mono text-emerald-500 mb-2">
                    ● SYSTEM ONLINE
                </div>
                <p class="text-slate-400 text-sm">
                    Koda Zenith v2.0.0 is ready for deployment.
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    const menu = document.getElementById("mobile-menu");
    const closeBtn = document.getElementById("close-mobile-menu");
    const searchTrigger = document.getElementById("mobile-search-trigger");

    function closeMenu() {
        menu?.classList.add("translate-x-full");
        menu?.setAttribute("aria-hidden", "true");
        document.body.style.overflow = "";
    }

    // Close event
    closeBtn?.addEventListener("click", closeMenu);

    // Search trigger event
    searchTrigger?.addEventListener("click", () => {
        closeMenu();
        // Dispatch standard keydown to open global search
        setTimeout(() => {
            document.dispatchEvent(
                new KeyboardEvent("keydown", { key: "k", metaKey: true }),
            );
        }, 100);
    });

    // Listen for open event from outside
    document.addEventListener("open-mobile-menu", () => {
        menu?.classList.remove("translate-x-full");
        menu?.setAttribute("aria-hidden", "false");
        document.body.style.overflow = "hidden";
    });
</script>
